<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Forgot Password | BrightPathHorizon CRM</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
  <style>
    /* â”€â”€ Forgot page overrides â”€â”€ */
    .auth-step {
      display: flex; align-items: center; gap: 8px;
      font-size: 11.5px; font-weight: 600; color: #9ca3af;
      letter-spacing: .4px; text-transform: uppercase;
      margin-bottom: 22px;
    }
    .auth-step-dot {
      width: 20px; height: 20px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 10px; font-weight: 800;
    }
    .auth-step-dot.active { background: #111827; color: #fff; }
    .auth-step-dot.inactive { background: #f3f4f6; color: #9ca3af; }
    .auth-step-line { flex: 1; height: 1px; background: #e5e7eb; }

    .forgot-icon-wrap {
      width: 56px; height: 56px; border-radius: 16px;
      background: #f3f4f6; display: flex; align-items: center; justify-content: center;
      margin-bottom: 22px;
    }

    .hint-box {
      background: #f8fafc; border: 1px solid #e5e7eb; border-radius: 10px;
      padding: 12px 14px; margin-top: 20px;
      display: flex; align-items: flex-start; gap: 10px;
    }
    .hint-box svg { flex-shrink: 0; margin-top: 1px; color: #6b7280; }
    .hint-box p { font-size: 12px; color: #6b7280; line-height: 1.6; margin: 0; }

    .back-link {
      display: inline-flex; align-items: center; gap: 7px;
      font-size: 13px; color: #6b7280; font-weight: 500;
      margin-top: 22px; transition: color .18s;
    }
    .back-link:hover { color: #111827; }

    .success-state { display: none; text-align: center; }
    .success-state.visible { display: block; }
    .default-state.hidden { display: none; }

    .success-check {
      width: 60px; height: 60px; border-radius: 50%;
      background: #ecfdf5; display: flex; align-items: center; justify-content: center;
      margin: 0 auto 18px; color: #10b981;
    }
    .success-title { font-size: 22px; font-weight: 800; color: #111827; margin-bottom: 8px; letter-spacing: -.4px; }
    .success-body { font-size: 13.5px; color: #6b7280; line-height: 1.65; margin-bottom: 24px; }
    .success-email-chip {
      display: inline-block; background: #f3f4f6; border: 1px solid #e5e7eb;
      border-radius: 8px; padding: 8px 16px; font-size: 13.5px;
      font-weight: 600; color: #374151; margin-bottom: 24px;
    }

    /* â”€â”€ Left panel copy for forgot â”€â”€ */
    .left-content .step-badges {
      display: flex; flex-direction: column; gap: 14px;
      margin-top: auto; padding-top: 40px;
    }
    .step-badge {
      display: flex; align-items: center; gap: 14px;
      background: rgba(255,255,255,0.07); border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px; padding: 14px 18px;
      backdrop-filter: blur(4px);
    }
    .step-badge-num {
      width: 32px; height: 32px; border-radius: 50%;
      background: rgba(255,255,255,0.15); color: #fff;
      font-weight: 800; font-size: 13px;
      display: flex; align-items: center; justify-content: center; flex-shrink: 0;
    }
    .step-badge-text { font-size: 13px; color: rgba(255,255,255,0.85); line-height: 1.4; }
    .step-badge-text strong { color: #fff; font-weight: 700; }

    /* Input with icon */
    .input-wrap { position: relative; }
    .input-wrap svg {
      position: absolute; left: 2px; top: 50%; transform: translateY(-50%);
      color: #9ca3af; pointer-events: none;
    }
    .input-with-icon { padding-left: 28px !important; }
  </style>
</head>
<body class="split-auth">
<div class="split-container">

  <!-- LEFT PANEL -->
  <div class="left-panel">
    <div class="curves"></div>
    <div class="left-content">

      <div class="left-logo">
        <a href="https://www.brightpathhorizon.com" target="_blank">
          <img src="/images/bphlogo.png" alt="BrightPath Logo">
        </a>
      </div>

      <h1 style="margin-top:8vh;">Recover<br>Your Access ðŸ”‘</h1>

      <p>Locked out? No worries. Enter your registered email and we'll send you a secure password reset link within seconds.</p>

      <div class="step-badges">
        <div class="step-badge">
          <div class="step-badge-num">1</div>
          <div class="step-badge-text"><strong>Enter your email</strong><br>The one linked to your CRM account</div>
        </div>
        <div class="step-badge">
          <div class="step-badge-num">2</div>
          <div class="step-badge-text"><strong>Check your inbox</strong><br>A reset link arrives in under a minute</div>
        </div>
        <div class="step-badge">
          <div class="step-badge-num">3</div>
          <div class="step-badge-text"><strong>Set a new password</strong><br>Back to managing leads in seconds</div>
        </div>
      </div>

    </div>
    <div class="left-footer">
      Â© <%= new Date().getFullYear() %> BrightPathHorizon Technologies
    </div>
  </div>

  <!-- RIGHT PANEL -->
  <div class="right-panel" style="position:relative;">

    <div class="login-box" style="max-width:360px;">

      <!-- Step indicator -->
      <div class="auth-step">
        <div class="auth-step-dot active">1</div>
        <div class="auth-step-line"></div>
        <div class="auth-step-dot inactive">2</div>
        <div class="auth-step-line"></div>
        <div class="auth-step-dot inactive">3</div>
      </div>

      <!-- Default state -->
      <div class="default-state" id="defaultState">

        <div class="forgot-icon-wrap">
          <svg viewBox="0 0 24 24" fill="none" stroke="#374151" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" width="26" height="26">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
        </div>

        <h2 style="font-size:13px;font-weight:600;color:#6b7280;margin-bottom:6px;">BrightPath CRM</h2>
        <h3 style="font-size:26px;font-weight:800;color:#111827;letter-spacing:-.5px;margin-bottom:8px;">Forgot password?</h3>
        <p style="font-size:13px;color:#6b7280;line-height:1.6;margin-bottom:28px;">No problem. Enter your account email and we'll send a secure reset link straight to your inbox.</p>

        <% if (typeof error !== 'undefined' && error && error.length > 0) { %>
          <% error.forEach(msg => { if(msg) { %>
            <div class="login-error" style="margin-bottom:16px;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="14" height="14" style="flex-shrink:0;display:inline;margin-right:6px;"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
              <%= msg %>
            </div>
          <% } }) %>
        <% } %>

        <% if (typeof success !== 'undefined' && success && success.length > 0) { %>
          <% success.forEach(msg => { if(msg) { %>
            <div style="background:#f0fdf4;color:#16a34a;border:1px solid #bbf7d0;border-radius:8px;padding:10px 14px;font-size:13px;margin-bottom:16px;display:flex;align-items:center;gap:8px;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="14" height="14"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
              <%= msg %>
            </div>
          <% } }) %>
        <% } %>

        <form method="POST" action="/auth/forgot" id="forgotForm" onsubmit="handleSubmit(event)">
          <div class="input-wrap">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" width="15" height="15">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/>
            </svg>
            <input
              class="input-with-icon"
              type="email"
              name="email"
              id="emailInput"
              placeholder="you@brightpathhorizon.com"
              required
              autocomplete="email"
            >
          </div>

          <button type="submit" class="login-btn" id="submitBtn" style="margin-top:8px;display:flex;align-items:center;justify-content:center;gap:8px;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round" width="15" height="15"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
            Send Reset Link
          </button>
        </form>

        <div class="hint-box">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" width="15" height="15"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
          <p>Make sure to use the email address associated with your CRM account. Check your spam folder if you don't see the email within 2 minutes.</p>
        </div>

        <a href="/auth/login" class="back-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="14" height="14"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
          Back to Login
        </a>

      </div>

    </div><!-- /.login-box -->

    <!-- Contact -->
    <p style="position:absolute;bottom:24px;left:0;right:0;text-align:center;font-size:12px;color:#9ca3af;font-family:'Plus Jakarta Sans',sans-serif;">
      Need help? <a href="mailto:contact@brightpathhorizon.com" style="color:#6b7280;font-weight:600;text-decoration:underline;text-underline-offset:3px;">contact@brightpathhorizon.com</a>
    </p>

  </div><!-- /.right-panel -->

</div><!-- /.split-container -->

<script>
function handleSubmit(e) {
  const btn = document.getElementById('submitBtn');
  btn.disabled = true;
  btn.innerHTML = `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round" width="15" height="15" style="animation:spin .7s linear infinite;">
      <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
    </svg>
    Sending...
  `;
  // let form submit naturally
}
</script>
<style>
@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
</style>
</body>
</html>